!function(){console.log("Productos Resultados");const e=new URLSearchParams(window.location.search),t=document.querySelector("#btn-filtrar-precio");let o=[],n=[],a=[],c=1,i=0,s=0,l=0;function r(){const e=document.querySelector("#secctionContainer"),t=a.length?a:o;for(;e.firstChild;)e.removeChild(e.firstChild);t.forEach((t=>{const o=document.createElement("section");o.classList.add("secction_resultados");const n=document.createElement("div");n.classList.add("card","secction_producto");const a=document.createElement("div");a.classList.add("card_producto-portada");const c=document.createElement("img");c.classList.add("card_producto-portada"),c.src=`/imagenes/${t.imagen}`,c.alt="imagen portada",a.appendChild(c),n.appendChild(a);const i=document.createElement("div");i.classList.add("card_producto-informacion");const s=document.createElement("p");s.classList.add("nombre-producto");const l=document.createElement("a");l.classList.add("link-nombre-producto"),l.href=`/productos/detalleProducto?resultado=${t.id}`,l.textContent=`${t.nombre}`,s.appendChild(l),i.appendChild(s);const r=document.createElement("div");r.classList.add("producto-informacion_contenido");const d=document.createElement("p");d.classList.add("line"),d.textContent="$19853",r.appendChild(d);const p=document.createElement("p");p.classList.add("producto-precio");const u=(new Intl.NumberFormat).format(t.precio);p.textContent=`${u} `;const m=document.createElement("span");m.textContent="25% OFF",p.appendChild(m),r.appendChild(p);const g=document.createElement("p");g.classList.add("producto-mesesintereses"),g.textContent="en ";const h=document.createElement("span");h.textContent="15 meses sin intereses de $999.95",g.appendChild(h),r.appendChild(g);const f=document.createElement("p");f.classList.add("producto-promocion"),f.textContent="por ser tu primera compra ";const C=document.createElement("span");C.textContent="Llega gratis maÃ±ana",f.appendChild(C),r.appendChild(f),i.appendChild(r),n.appendChild(i),o.appendChild(n),e.appendChild(o)}))}function d(){const e=document.querySelector("#contenedor-marcas");for(;e.firstChild;)e.removeChild(e.firstChild);n.forEach((t=>{const o=document.createElement("div");o.classList.add("contenedor-marca");const n=document.createElement("label");n.setAttribute("for",`marca${t.id}`),n.classList.add("label-filter"),n.textContent=t.nombre;const a=document.createElement("input");a.type="checkbox",a.setAttribute("id",`marca${t.id}`),a.setAttribute("data-id",t.id),o.appendChild(a),o.appendChild(n),e.appendChild(o)}));document.querySelectorAll('input[type="checkbox"]').forEach((e=>e.addEventListener("click",p)))}function p(e){const t=e.target.getAttribute("data-id"),n=e.target.checked;var c=[...o];if(console.log("id marca: ",t),n){console.log("checked...");const e=c.filter((e=>e.id_marca===t));return console.log(e),0!==e.length?(a=[...a,e[0]],void r()):void r()}a=a.filter((e=>e.id_marca!==t)),console.log(a),r(),0===a.length&&(a=[],r())}function u(){const e=[...o];a=e.filter((e=>Number(e.precio)<=5e3)),a.length>0&&r()}function m(){const e=[...o];a=e.filter((e=>Number(e.precio)>=5e3&&Number(e.precio)<=9e3)),a.length>0&&r()}function g(){const e=[...o];a=e.filter((e=>Number(e.precio)>=9e3)),a.length>0&&r()}function h(){const t=document.querySelector(".paginacion");for(;t.firstChild;)t.removeChild(t.firstChild);if(l){const a=document.createElement("a");a.classList.add("paginacion__enlace","paginacion__enlace--texto"),a.textContent="Anterior",a.onclick=function(){!async function(t){console.log("click pagina anterior... ",t);try{const a=e.get("resultado"),p=new FormData;p.append("id",a),p.append("pagina",t);const u="/api/obtenerResultadosBusqueda",m=await fetch(u,{method:"POST",body:p});if(m.ok){c=t;const e=await m.json();console.log("productos: ",e),i=e.total_paginas,s=e.pagina_siguiente,l=e.pagina_anterior,console.log("total paginas: ",i),console.log("pagina_siguiente: ",s),console.log("pagina_anterior: ",l),console.log("pagina actual: ",c),o=[...e.datos],console.log("arrProductos: ",o),n=[...e.marcas],r(),d(),h()}}catch(e){console.log(e)}}(l)},t.appendChild(a)}for(let e=1;e<=i;e++)if(e===c){const o=document.createElement("span");o.classList.add("paginacion__enlace","paginacion__enlace--actual"),o.textContent=e,t.appendChild(o)}else{const o=document.createElement("a");o.classList.add("paginacion__enlace","paginacion__enlace--numero"),o.textContent=e,o.onclick=function(){f(e)},t.appendChild(o)}if(s){const a=document.createElement("a");a.classList.add("paginacion__enlace","paginacion__enlace--texto"),a.textContent="Siguiente",a.onclick=function(){!async function(t){console.log("click pagina siguiente... ",t);try{const a=e.get("resultado"),p=new FormData;p.append("id",a),p.append("pagina",t);const u="/api/obtenerResultadosBusqueda",m=await fetch(u,{method:"POST",body:p});if(m.ok){c=t;const e=await m.json();console.log("productos: ",e),i=e.total_paginas,s=e.pagina_siguiente,l=e.pagina_anterior,console.log("total paginas: ",i),console.log("pagina_siguiente: ",s),console.log("pagina_anterior: ",l),console.log("pagina actual: ",c),o=[...e.datos],console.log("arrProductos: ",o),n=[...e.marcas],r(),d(),h()}}catch(e){console.log(e)}}(s)},t.appendChild(a)}}async function f(t){console.log("click paginacion numero... ",t);try{const a=e.get("resultado"),p=new FormData;p.append("id",a),p.append("pagina",t);const u="/api/obtenerResultadosBusqueda",m=await fetch(u,{method:"POST",body:p});if(m.ok){c=t;const e=await m.json();console.log("productos: ",e),i=e.total_paginas,s=e.pagina_siguiente,l=e.pagina_anterior,console.log("total paginas: ",i),console.log("pagina_siguiente: ",s),console.log("pagina_anterior: ",l),console.log("pagina actual: ",c),o=[...e.datos],console.log("arrProductos: ",o),n=[...e.marcas],r(),d(),h()}}catch(e){console.log(e)}}!async function(){const t=e.get("resultado");try{const e=new FormData;e.append("id",t),e.append("pagina",c);const a="/api/obtenerResultadosBusqueda",p=await fetch(a,{method:"POST",body:e});if(p.ok){const e=await p.json();console.log("productos: ",e),i=e.total_paginas,s=e.pagina_siguiente,l=e.pagina_anterior,console.log("total paginas: ",i),console.log("pagina_siguiente: ",s),console.log("pagina_anterior: ",l),o=[...e.datos],console.log("arrProductos: ",o),n=[...e.marcas],r(),d(),h()}}catch(e){console.log(e)}}(),function(){document.querySelector("#linkOne-precio").addEventListener("click",u);document.querySelector("#linkThree-precio").addEventListener("click",g);document.querySelector("#linkTwo-precio").addEventListener("click",m)}(),t.addEventListener("click",(function(){console.log("filtrando...");const e=document.createElement("p"),t=document.querySelector(".contenedor-precio-filtro"),n=document.querySelector(".precios-filtros"),c=Number(document.querySelector("#minimo").value),i=Number(document.querySelector("#maximo").value),s=[...o];a=s.filter((e=>Number(e.precio)>=c&&Number(e.precio)<=i)),console.log("prodductosFiltrados: ",a),(c<=0||i<=0)&&(e.textContent="El precio minimo o el precio maximo son requeridos",e.classList.add("alerta-error-precio"),t.insertBefore(e,n),setTimeout((()=>{e.remove()}),4e3))}))}();