console.log("carrito");const contenedorItems=document.querySelector("#lists-items");var itemsCarrito=JSON.parse(localStorage.getItem("productos"))||[];function estaVacioCarrito(){const t=document.querySelector("#btnComprar");0===itemsCarrito.length&&t.remove()}function obtener(){itemsCarrito.forEach((t=>{const e=document.createElement("div");e.classList.add("card-list__item");const n=document.createElement("div");n.classList.add("item-imagen");const a=document.createElement("img");a.classList.add("imagen-portada"),a.src=`/imagenes/${t.imagen}`,n.appendChild(a);const i=document.createElement("div");i.classList.add("item-descripcion");const o=document.createElement("p");o.textContent=`${t.producto}`;const d=document.createElement("div");d.classList.add("item-acciones");const r=document.createElement("a");r.href="#",r.textContent="Eliminar",r.onclick=function(){eliminar(t.id)};const c=document.createElement("a");c.href="#",c.textContent="Guardar";const s=document.createElement("a");s.href="#",s.textContent="Comprar ahora",d.appendChild(r),d.appendChild(c),d.appendChild(s),i.appendChild(o),i.appendChild(d);const m=document.createElement("div");m.classList.add("item-cantidad");const l=document.createElement("div");l.classList.add("item-cantidad_container");const C=document.createElement("button");C.textContent="-",C.onclick=function(){let e=parseInt(t.cantidad);t.cantidad=e,restarCantidad(t)};const u=document.createElement("span");u.classList.add("span-cantidad"),u.textContent=`${t.cantidad}`;const p=document.createElement("button");p.textContent="+",p.onclick=function(){let e=parseInt(t.cantidad);t.cantidad=e,sumarCantidad(t)},l.appendChild(C),l.appendChild(u),l.appendChild(p),m.appendChild(l);const f=document.createElement("div");f.classList.add("item-precio");const h=document.createElement("p");h.textContent="$"+(new Intl.NumberFormat).format(t.precio),f.appendChild(h),e.appendChild(n),e.appendChild(i),e.appendChild(m),e.appendChild(f),contenedorItems.appendChild(e)})),calcularTotales()}function eliminar(t){itemsCarrito=itemsCarrito.filter((e=>e.id!==t)),sincronizarLS(),limpiarContenedor(),obtener(),establecerCantidadCarrito()}function sumarCantidad(t){if(t.cantidad>0&&itemsCarrito.some((e=>e.id===t.id))){const e=itemsCarrito.map((e=>(e.id===t.id&&e.cantidad<5&&(e.cantidad=t.cantidad+1),e)));itemsCarrito=[...e],sincronizarLS(),limpiarContenedor(),obtener()}}function restarCantidad(t){if(t.cantidad>0&&itemsCarrito.some((e=>e.id===t.id))){const e=itemsCarrito.map((e=>(e.id===t.id&&e.cantidad>1&&(e.cantidad=t.cantidad-1),e)));itemsCarrito=[...e],sincronizarLS(),limpiarContenedor(),obtener()}}function sincronizarLS(){localStorage.setItem("productos",JSON.stringify(itemsCarrito))}function limpiarContenedor(){for(;contenedorItems.firstChild;)contenedorItems.removeChild(contenedorItems.firstChild)}function establecerCantidadCarrito(){document.querySelector("#badge-cantidad").textContent=itemsCarrito.length}function calcularTotales(){const t=document.querySelector("#productos-cantidad"),e=document.querySelector("#subtotal"),n=document.querySelector("#total");let a=0;itemsCarrito.forEach((t=>{let e=t.precio;a+=t.cantidad*e})),t.textContent=`(${cantidadProdcutos()})`,e.textContent=(new Intl.NumberFormat).format(a),n.textContent=(new Intl.NumberFormat).format(a)}function cantidadProdcutos(){var t=0;return itemsCarrito.forEach((e=>{t+=e.cantidad})),t}document.addEventListener("DOMContentLoaded",(()=>{establecerCantidadCarrito(),obtener(),estaVacioCarrito()}));