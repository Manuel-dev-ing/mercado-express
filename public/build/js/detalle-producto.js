!function(){console.log("Detalle Producto");const e=document.querySelector("#id-producto"),t=document.querySelector("#btnAgregar"),o=document.querySelector("#nombre-producto"),n=document.querySelector("#precio-producto"),c=document.querySelector("#cantidadStock"),r=document.querySelector("#btnComprarAhora"),d=new URLSearchParams(window.location.search);let a=[],i=[];var l=JSON.parse(localStorage.getItem("productos"))||[];function u(){console.log("Comprando Ahora..."),s()}function s(){console.log("click...");let t={};t.id_producto=parseInt(e.value),t.cantidad=parseInt(c.value),t.producto=o.textContent,t.precio=Number(n.textContent.replace(",","")),t.imagen=a.imagen,console.log("Producto: ",t),i.push(t),l=[...l,t],console.log("Producto Agregado al Carrito"),localStorage.setItem("productos",JSON.stringify(l)),p()}function p(){document.querySelector("#badge-cantidad").textContent=l.length}t.addEventListener("click",s),r.addEventListener("click",u),document.addEventListener("DOMContentLoaded",(()=>{!async function(){const e=parseInt(d.get("resultado"));console.log("obteniendo producto...");try{const o=new FormData;o.append("id",e);const n="/api/obtenerProductoPorId",c=await fetch(n,{method:"POST",body:o});if(c.ok){const e=await c.json();a=e.datos,function(){const e=document.querySelector("#id-producto"),o=document.querySelector("#nombre-producto"),n=document.querySelector("#precio-producto"),c=document.querySelector("#disponibles"),d=document.querySelector("#cantidadStock"),i=document.querySelector("#container-info-adicional"),l=document.querySelector("#descripcion"),u=document.querySelector("#imagen"),s=document.querySelector("#contenedor-select-cantidad"),p=document.querySelector("#pStock");e.value=a.id;let m=document.createElement("img");m.src=`/imagenes/${a.imagen}`,m.alt="imagen del producto",u.appendChild(m),o.textContent=a.nombre,n.textContent=(new Intl.NumberFormat).format(a.precio);const S=a.stock;if(null!==S)if(0!=parseInt(S.stock)){console.log("SI hay Stock"),t.disabled=!1,c.textContent=`(${S.stock} disponibles)`;let e=parseInt(S.stock);for(let t=1;t<=e;t++){const e=document.createElement("option");e.value=t,e.textContent=t,d.appendChild(e)}}else s.remove(),p.textContent="No hay Stock disponible",p.classList.add("error"),t.disabled=!0,r.remove();a.informacionAdicional.forEach((e=>{let t=document.createElement("p");t.classList.add("section-caract_container-info-adiciona_atributo");let o=document.createTextNode(e.atributo),n=document.createElement("span");n.textContent=" "+e.valor,t.appendChild(o),t.appendChild(n),i.appendChild(t)}));let g=document.createElement("h2");g.classList.add("section-descripcion_titulo","section-titulo"),g.textContent="Descripcion",l.appendChild(g);let y=document.createElement("p");y.classList.add("section-descripcion_parrafo"),y.textContent=`${a.descripcion}`,l.appendChild(y)}()}}catch(e){console.log(e)}}(),p()}))}();